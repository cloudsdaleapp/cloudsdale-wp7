<phone:PhoneApplicationPage 
    x:Class="Cloudsdale.Home"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="Comic Sans MS"
    FontSize="28"
    Foreground="Black"
    SupportedOrientations="Portrait"  Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <phone:PhoneApplicationPage.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="XamlResources.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </phone:PhoneApplicationPage.Resources>

    <Grid x:Name="LayoutRoot" Background="{StaticResource PortraitBackground}">
        <controls:Pivot Title="Cloudsdale">
            <controls:Pivot.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding}" FontFamily="Comic Sans MS" FontSize="48"/>
                </DataTemplate>
            </controls:Pivot.HeaderTemplate>
            <controls:PivotItem Header="Home">

            </controls:PivotItem>
            <controls:PivotItem Header="Clouds">
                <Grid>
                    <ScrollViewer Margin="0,0,0,50">
                        <ItemsControl x:Name="CloudList" />
                    </ScrollViewer>
                    <Button VerticalAlignment="Bottom" BorderBrush="Transparent" Margin="0,0,0,2" 
                            Height="50" Padding="-25" Width="50" >
                        <Image Source="/Images/Icons/refresh.png" Width="50" Height="50" />
                        <Button.Style>
                            <Style TargetType="ButtonBase">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
                                <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
                                <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
                                <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
                                <Setter Property="Padding" Value="10,3,10,5"/>

                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ButtonBase">
                                            <Grid Background="Transparent">
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="CommonStates">
                                                        <VisualState x:Name="Normal"/>
                                                        <VisualState x:Name="MouseOver"/>
                                                        <VisualState x:Name="Disabled"/>

                                                        <!-- the following visual state describes the behaviour you are observing -->
                                                        <VisualState x:Name="Pressed">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentContainer" Storyboard.TargetProperty="Projection">
                                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                                        <DiscreteObjectKeyFrame.Value>
                                                                            <PlaneProjection RotationX="30" CenterOfRotationX="-0.2" />
                                                                        </DiscreteObjectKeyFrame.Value>
                                                                    </DiscreteObjectKeyFrame>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                                <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="0" Background="{TemplateBinding Background}" Margin="{StaticResource PhoneTouchTargetOverhang}" >
                                                    <ContentControl x:Name="ContentContainer" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" Padding="{TemplateBinding Padding}" Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
                                                </Border>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </controls:PivotItem>
            <controls:PivotItem Header="Explore" Foreground="Black">
                <Grid>
                    <Grid Margin="-12,-30" Height="110" VerticalAlignment="Top">
                        <Grid.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#FFF0F0F0" Offset="1" />
                                <GradientStop Color="#FFA7A7A7" Offset="0.6" />
                                <GradientStop Color="#FFA7A7A7" Offset="0" />
                            </LinearGradientBrush>
                        </Grid.Background>
                        <TextBox VerticalAlignment="Top" Margin="0,0,75,0" />
                        <Button VerticalAlignment="Top" HorizontalAlignment="Right" 
                                BorderBrush="Transparent" Margin="0,-9">
                            <Image Source="/Images/Icons/search.png" Width="50" />
                            <Button.Style>
                                <Style TargetType="ButtonBase">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
                                    <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
                                    <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
                                    <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
                                    <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
                                    <Setter Property="Padding" Value="10,3,10,5"/>

                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="ButtonBase">
                                                <Grid Background="Transparent">
                                                    <VisualStateManager.VisualStateGroups>
                                                        <VisualStateGroup x:Name="CommonStates">
                                                            <VisualState x:Name="Normal"/>
                                                            <VisualState x:Name="MouseOver"/>
                                                            <VisualState x:Name="Disabled"/>

                                                            <!-- the following visual state describes the behaviour you are observing -->
                                                            <VisualState x:Name="Pressed">
                                                                <Storyboard>
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentContainer" Storyboard.TargetProperty="Projection">
                                                                        <DiscreteObjectKeyFrame KeyTime="0">
                                                                            <DiscreteObjectKeyFrame.Value>
                                                                                <PlaneProjection RotationX="30" CenterOfRotationX="-0.2" />
                                                                            </DiscreteObjectKeyFrame.Value>
                                                                        </DiscreteObjectKeyFrame>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                </Storyboard>
                                                            </VisualState>
                                                        </VisualStateGroup>
                                                    </VisualStateManager.VisualStateGroups>
                                                    <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="0" Background="{TemplateBinding Background}" Margin="{StaticResource PhoneTouchTargetOverhang}" >
                                                        <ContentControl x:Name="ContentContainer" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" Padding="{TemplateBinding Padding}" Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
                                                    </Border>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </Grid>
                    <ScrollViewer Margin="0,50,0,50">
                        <ItemsControl x:Name="searchResults">
                            <TextBlock Text="Loading..." />
                        </ItemsControl>
                    </ScrollViewer>
                    <Button VerticalAlignment="Bottom" BorderBrush="Transparent" Margin="0,0,0,2" 
                            Height="50" Padding="-25" Width="50" Click="ExploreRefreshClick" >
                        <Image Source="/Images/Icons/refresh.png" Width="50" Height="50" />
                        <Button.Style>
                            <Style TargetType="ButtonBase">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
                                <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
                                <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
                                <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
                                <Setter Property="Padding" Value="10,3,10,5"/>

                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ButtonBase">
                                            <Grid Background="Transparent">
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="CommonStates">
                                                        <VisualState x:Name="Normal"/>
                                                        <VisualState x:Name="MouseOver"/>
                                                        <VisualState x:Name="Disabled"/>

                                                        <!-- the following visual state describes the behaviour you are observing -->
                                                        <VisualState x:Name="Pressed">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentContainer" Storyboard.TargetProperty="Projection">
                                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                                        <DiscreteObjectKeyFrame.Value>
                                                                            <PlaneProjection RotationX="30" CenterOfRotationX="-0.2" />
                                                                        </DiscreteObjectKeyFrame.Value>
                                                                    </DiscreteObjectKeyFrame>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                                <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="0" Background="{TemplateBinding Background}" Margin="{StaticResource PhoneTouchTargetOverhang}" >
                                                    <ContentControl x:Name="ContentContainer" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" Padding="{TemplateBinding Padding}" Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
                                                </Border>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button VerticalAlignment="Bottom" HorizontalAlignment="Left" Content="Popular" 
                            Foreground="Black" BorderBrush="Black" Width="175" Margin="30,-8" 
                            Click="PopularClick" />
                    <Button VerticalAlignment="Bottom" HorizontalAlignment="Right" Content="Recent" 
                            Foreground="Black" BorderBrush="Black" Width="175" Margin="30,-8" 
                            Click="RecentClick" />
                </Grid>
            </controls:PivotItem>
            <controls:PivotItem Header="Settings">
                
            </controls:PivotItem>
        </controls:Pivot>
    </Grid>

</phone:PhoneApplicationPage>